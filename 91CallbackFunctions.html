<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <h1 style="text-align: center;">  Callback Functions </h1>
    
</body>
<script>
    //now making our code more reuseable by making a function

    const getTodos = (callback) =>{

        
    const request = new XMLHttpRequest();

    request.addEventListener('readystatechange',()=>{
        
        if(request.readyState === 4 && request.status === 200){  //only fires when readystate is 4 and get okay response
            callback(undefined,request.responseText);
        }
        else if(request.readyState === 4){
            callback('Could not fetch data',undefined);
        }
    });

    request.open('GET','https://jsonplaceholder.typicode.com/todos/'); 
    request.send();
    };

    console.log(1);
    console.log(2);

    getTodos((err,data) => {  //error first data second   //CALLBACK FIRES ONCE COMPLETELY MEANING START NOW AND FINISH LATER ASYNC
        console.log('callback fired');
        //console.log(err,data);
        if(err){
            console.log(err);
        }
        else{
            console.log(data);
        }
    });
    console.log(3);
    console.log(4);







</script>
</html>